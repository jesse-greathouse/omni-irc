; Unix build: Notty + headless unixsock
(executable
 (name main_unix)
 (public_name omni-irc-client)
 (package omni-irc-client)
 (modules main_unix)
 (enabled_if %{os_type} != "Win32")
 (libraries
  lwt.unix
  omni-irc-conn
  omni-irc-io-tcp
  omni-irc-io-tls
  omni-irc-engine
  omni-irc-client.lib
  irc_ui
  omni-irc-ui-notty
  irc_ui_headless
  omni-irc-ui.loopback))

; Windows build: no Notty, no headless-unixsock
(executable
 (name main_win32)
 (public_name omni-irc-client)
 (package omni-irc-client)
 (modules main_win32)
 (enabled_if %{os_type} = "Win32")
 (libraries
  lwt.unix
  omni-irc-conn
  omni-irc-io-tcp
  omni-irc-io-tls
  omni-irc-engine
  omni-irc-client.lib
  irc_ui
  omni-irc-ui.loopback))
